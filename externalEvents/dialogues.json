{
  "associatedLayout": "Village",
  "name": "Dialogues",
  "events": [
    {
      "colorB": 228,
      "colorG": 176,
      "colorR": 74,
      "creationTime": 0,
      "name": "Dialogues gestion globale",
      "source": "",
      "type": "BuiltinCommonInstructions::Group",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Innitiate your dialogue data by loading it from a yarn json file"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::Or"
              },
              "parameters": [],
              "subInstructions": [
                {
                  "type": {
                    "value": "DepartScene"
                  },
                  "parameters": [
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "SceneJustResumed"
                  },
                  "parameters": [
                    ""
                  ]
                }
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"endedChat\""
              ]
            },
            {
              "type": {
                "value": "BuiltinExternalLayouts::CreateObjectsFromExternalLayout"
              },
              "parameters": [
                "",
                "\"Boite de dialogue\"",
                "0",
                "0",
                "0"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::Or"
              },
              "parameters": [],
              "subInstructions": [
                {
                  "type": {
                    "value": "DepartScene"
                  },
                  "parameters": [
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "SceneJustResumed"
                  },
                  "parameters": [
                    ""
                  ]
                }
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "Cache"
              },
              "parameters": [
                "BoiteDeDialogue"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Start dialogue with an npc, the npc moves only when not chatting with the player"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BooleanObjectVariable"
              },
              "parameters": [
                "Dialoguables",
                "talking",
                "False",
                ""
              ]
            },
            {
              "type": {
                "value": "CompareTimer"
              },
              "parameters": [
                "",
                "\"endedChat\"",
                ">",
                "1"
              ]
            },
            {
              "type": {
                "value": "KeyFromTextReleased"
              },
              "parameters": [
                "Keyboard::KeyFromTextReleased(GlobalVariableString(TouchesValider))",
                "GlobalVariableString(Options.Touches.Valider)"
              ]
            },
            {
              "type": {
                "value": "Distance"
              },
              "parameters": [
                "Joueur",
                "Dialoguables",
                "20",
                ""
              ]
            },
            {
              "type": {
                "value": "StringVariable"
              },
              "parameters": [
                "EtatJeu",
                "!=",
                "\"LancerJeu\""
              ]
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [
            {
              "type": {
                "value": "DialogueTree::StartDialogueFromBranch"
              },
              "parameters": [
                "Dialoguables.VariableString(dialogBranch)"
              ]
            },
            {
              "type": {
                "value": "SetBooleanObjectVariable"
              },
              "parameters": [
                "Dialoguables",
                "talking",
                "True",
                ""
              ]
            },
            {
              "type": {
                "value": "AnimatableCapability::AnimatableBehavior::SetName"
              },
              "parameters": [
                "Joueur",
                "Animation",
                "=",
                "\"Talking\""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DialogueTree::IsDialogueRunning"
              },
              "parameters": []
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ActivateBehavior"
              },
              "parameters": [
                "Joueur",
                "TopDownMovement",
                "no"
              ]
            },
            {
              "type": {
                "value": "Montre"
              },
              "parameters": [
                "BoiteDeDialogue",
                ""
              ]
            },
            {
              "type": {
                "value": "PlaySound"
              },
              "parameters": [
                "",
                "Talk.wav",
                "",
                "Options.Volumes.Sons",
                ""
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"textScroll\""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "DialogueTree::IsDialogueRunning"
              },
              "parameters": []
            },
            {
              "type": {
                "value": "CompareTimer"
              },
              "parameters": [
                "",
                "\"textScroll\"",
                ">",
                "0.5"
              ]
            },
            {
              "type": {
                "value": "KeyFromTextReleased"
              },
              "parameters": [
                "",
                "GlobalVariableString(Options.Touches.Valider)"
              ]
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ActivateBehavior"
              },
              "parameters": [
                "Joueur",
                "TopDownMovement",
                "yes"
              ]
            },
            {
              "type": {
                "value": "Cache"
              },
              "parameters": [
                "BoiteDeDialogue"
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"endedChat\""
              ]
            },
            {
              "type": {
                "value": "SetBooleanObjectVariable"
              },
              "parameters": [
                "Dialoguables",
                "talking",
                "False",
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "The TEXT type is what is rendered to the player to read. How that is presented depends on what expressions you use. Below is an exampleof the most common presentation with scrolling text"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DialogueTree::IsDialogueLineType"
              },
              "parameters": [
                "\"text\""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BBText::SetBBText"
              },
              "parameters": [
                "DialogueBBText",
                "=",
                "DialogueTree::ClippedLineText()"
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "CompareTimer"
                  },
                  "parameters": [
                    "",
                    "\"textScroll\"",
                    ">",
                    "GlobalVariable(MultiplicateurVitesseDialogues) / (GlobalVariable(Options.VitesseDialogues) + 10)"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DialogueTree::ScrollClippedText"
                  },
                  "parameters": []
                },
                {
                  "type": {
                    "value": "ResetTimer"
                  },
                  "parameters": [
                    "",
                    "\"textScroll\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyFromTextReleased"
                  },
                  "parameters": [
                    "",
                    "GlobalVariableString(Options.Touches.Valider)"
                  ]
                },
                {
                  "type": {
                    "value": "DialogueTree::HasClippedTextScrollingCompleted"
                  },
                  "parameters": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "PlaySound"
                  },
                  "parameters": [
                    "",
                    "Talk.wav",
                    "",
                    "Options.Volumes.Sons",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "DialogueTree::GoToNextLine"
                  },
                  "parameters": []
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyFromTextPressed"
                  },
                  "parameters": [
                    "",
                    "GlobalVariableString(Options.Touches.Valider)"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "MultiplicateurVitesseDialogues",
                    "=",
                    "0.1"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "KeyFromTextPressed"
                  },
                  "parameters": [
                    "",
                    "GlobalVariableString(Options.Touches.Valider)"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetNumberVariable"
                  },
                  "parameters": [
                    "MultiplicateurVitesseDialogues",
                    "=",
                    "5"
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "The [[OPTIONS]] type is whenever in your yarn syntax you are asking the player to make a choice. Below is a common example of showing the choices and triggering one"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "DialogueTree::IsDialogueLineType"
              },
              "parameters": [
                "\"options\""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "Cache"
              },
              "parameters": [
                "DialogueChoix"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DialogueTree::IsDialogueLineType"
              },
              "parameters": [
                "\"options\""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "Montre"
              },
              "parameters": [
                "DialogueChoix",
                ""
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyFromTextReleased"
                  },
                  "parameters": [
                    "",
                    "\"Down\""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DialogueTree::SelectNextOption"
                  },
                  "parameters": []
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyFromTextReleased"
                  },
                  "parameters": [
                    "",
                    "\"Up\""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DialogueTree::SelectPreviousOption"
                  },
                  "parameters": []
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "KeyFromTextReleased"
                  },
                  "parameters": [
                    "",
                    "GlobalVariableString(Options.Touches.Valider)"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DialogueTree::ConfirmSelectOption"
                  },
                  "parameters": []
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "DialogueTree::HasSelectedOptionChanged"
                  },
                  "parameters": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "PlaySound"
                  },
                  "parameters": [
                    "",
                    "Talk.wav",
                    "",
                    "Options.Volumes.Sons",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "DialogueChoix",
                    "Text",
                    "=",
                    "DialogueTree::VerticalOptionsList(\"> \")"
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": ""
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DialogueTree::IsCommandCalled"
              },
              "parameters": [
                "\"nom\""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "PlaySound"
              },
              "parameters": [
                "",
                "Attack.wav",
                "",
                "Options.Volumes.Sons",
                ""
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::CompareStrings"
                  },
                  "parameters": [
                    "DialogueTree::CommandParameter(0)",
                    "=",
                    "\"\""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "Cache"
                  },
                  "parameters": [
                    "DialoguePanelNom"
                  ]
                },
                {
                  "type": {
                    "value": "Cache"
                  },
                  "parameters": [
                    "DialogueNom"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "BuiltinCommonInstructions::CompareStrings"
                  },
                  "parameters": [
                    "DialogueTree::CommandParameter(0)",
                    "=",
                    "\"\""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "TextContainerCapability::TextContainerBehavior::SetValue"
                  },
                  "parameters": [
                    "DialogueNom",
                    "Text",
                    "=",
                    "DialogueTree::CommandParameter(0)"
                  ]
                },
                {
                  "type": {
                    "value": "Montre"
                  },
                  "parameters": [
                    "DialoguePanelNom",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "Montre"
                  },
                  "parameters": [
                    "DialogueNom",
                    ""
                  ]
                }
              ]
            }
          ]
        }
      ],
      "parameters": []
    }
  ]
}